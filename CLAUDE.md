# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Repository Overview

This is a Jekyll-based blog using the Chirpy theme, hosted on GitHub Pages at https://thomas783.github.io. The blog focuses on technical content about Kotlin, Spring, JPA, and other development topics.

## Commands

### Development Server
```bash
# Run Jekyll development server with live reload
bash tools/run.sh

# Run in production mode
bash tools/run.sh --production

# Specify host
bash tools/run.sh --host 0.0.0.0
```

### Building and Testing
```bash
# Build and test the site (runs htmlproofer)
bash tools/test.sh

# Build site for production
JEKYLL_ENV=production bundle exec jekyll build

# Install dependencies
bundle install
npm install
```

### Asset Building
```bash
# Build CSS and JavaScript assets
npm run build

# Build CSS only (with PurgeCSS)
npm run build:css

# Build JavaScript only
npm run build:js

# Watch JavaScript files for changes
npm run watch:js
```

### Code Quality
```bash
# Lint SCSS files
npm run lint:scss

# Fix SCSS linting issues
npm run lint:fix:scss

# Run all tests
npm test
```

## Architecture

### Jekyll Structure
- **_posts/**: Blog posts in Markdown format (naming pattern: YYYY-MM-DD-title.md)
- **_tabs/**: Main navigation pages (about, archives, categories, tags)
- **_layouts/**: HTML templates for different page types
- **_includes/**: Reusable HTML components
- **_sass/**: SCSS stylesheets
- **_data/**: Configuration data and localization files
- **_site/**: Generated static site (git-ignored)

### Asset Pipeline
- **_javascript/**: Source JavaScript modules
  - `commons.js`, `home.js`, `categories.js`, `page.js`, `post.js`: Page-specific scripts
  - `modules/theme.js`: Theme switching functionality
  - `pwa/`: Progressive Web App scripts
- **assets/js/dist/**: Compiled and minified JavaScript (generated by Rollup)
- JavaScript is built using Rollup with Babel transpilation and Terser minification

### Configuration
- **_config.yml**: Main Jekyll configuration
  - Site metadata, social links, analytics, comments system
  - Theme settings, PWA configuration
- **package.json**: Node.js dependencies and build scripts
- **rollup.config.js**: JavaScript bundling configuration
- **purgecss.js**: CSS optimization configuration

### Key Features Configured
- **Comments**: Utterances (GitHub issues-based comments)
- **Theme Mode**: Dark mode enabled by default
- **PWA**: Progressive Web App enabled with offline caching
- **Analytics**: Google Analytics ready (ID needs to be added)
- **SEO**: Jekyll SEO tag configured with site verification

## Writing Posts

Posts should be placed in `_posts/` with the naming convention `YYYY-MM-DD-title.md`. Each post should include front matter:

```yaml
---
title: Post Title
date: YYYY-MM-DD HH:MM:SS +/-TTTT
categories: [category1, category2]
tags: [tag1, tag2]
---
```

## Development Workflow

1. Create new posts in `_posts/` directory
2. Run development server with `bash tools/run.sh`
3. Build assets if JavaScript/CSS changes are made: `npm run build`
4. Test site before deployment: `bash tools/test.sh`
5. Commit changes and push to GitHub (automatically deployed via GitHub Pages)